<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Data Storage - Flight Booking System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }

        .diagram-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .storage-layer {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid;
        }

        .frontend {
            border-left-color: #3498db;
        }

        .backend {
            border-left-color: #e74c3c;
        }

        .database {
            border-left-color: #27ae60;
            grid-column: 1 / -1;
        }

        .layer-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .frontend .icon { background: #3498db; }
        .backend .icon { background: #e74c3c; }
        .database .icon { background: #27ae60; }

        .storage-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 3px solid #ddd;
        }

        .storage-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .storage-item p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .code-snippet {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 10px 0;
            overflow-x: auto;
        }

        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(90deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
        }

        .flow-step {
            text-align: center;
            flex: 1;
        }

        .flow-step-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .step1 { background: #3498db; }
        .step2 { background: #f39c12; }
        .step3 { background: #e74c3c; }
        .step4 { background: #27ae60; }

        .arrow {
            font-size: 2rem;
            color: #95a5a6;
            margin: 0 10px;
        }

        .security-note {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .security-note h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .security-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .security-feature {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .highlight strong {
            color: #d63031;
        }

        @media (max-width: 768px) {
            .diagram-container {
                grid-template-columns: 1fr;
            }
            
            .flow-diagram {
                flex-direction: column;
                gap: 20px;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Login Data Storage Architecture</h1>
        <p style="text-align: center; color: #666; margin-bottom: 40px; font-size: 1.1rem;">
            Visual representation of how login data flows and is stored in the Flight Booking System
        </p>

        <div class="flow-diagram">
            <div class="flow-step">
                <div class="flow-step-icon step1">1</div>
                <h4>User Login</h4>
                <p>Frontend Form</p>
            </div>
            <div class="arrow">‚Üí</div>
            <div class="flow-step">
                <div class="flow-step-icon step2">2</div>
                <h4>API Request</h4>
                <p>Flask Server</p>
            </div>
            <div class="arrow">‚Üí</div>
            <div class="flow-step">
                <div class="flow-step-icon step3">3</div>
                <h4>Authentication</h4>
                <p>Password Hash</p>
            </div>
            <div class="arrow">‚Üí</div>
            <div class="flow-step">
                <div class="flow-step-icon step4">4</div>
                <h4>Session Storage</h4>
                <p>Database + Cookies</p>
            </div>
        </div>

        <div class="diagram-container">
            <!-- Frontend Layer -->
            <div class="storage-layer frontend">
                <div class="layer-title">
                    <div class="icon">F</div>
                    Frontend (Browser)
                </div>

                <div class="storage-item">
                    <h3>üìù Login Form (index.html)</h3>
                    <p><strong>Location:</strong> Lines 125-150 in index.html</p>
                    <p><strong>Data Collected:</strong> Email and Password</p>
                    <div class="code-snippet">
&lt;input type="email" id="loginEmail" placeholder="your@email.com"&gt;
&lt;input type="password" id="loginPassword" placeholder="Enter password"&gt;</div>
                </div>

                <div class="storage-item">
                    <h3>üç™ Session Cookies</h3>
                    <p><strong>Storage:</strong> Browser cookies (HTTP-only)</p>
                    <p><strong>Contains:</strong> Session ID, user preferences</p>
                    <p><strong>Security:</strong> Secure, SameSite=Lax</p>
                </div>

                <div class="storage-item">
                    <h3>üíæ Local State (app.js)</h3>
                    <p><strong>Location:</strong> Lines 17-24 in app.js</p>
                    <div class="code-snippet">
const state = {
    currentUser: null,
    isAuthenticated: false
};</div>
                </div>
            </div>

            <!-- Backend Layer -->
            <div class="storage-layer backend">
                <div class="layer-title">
                    <div class="icon">B</div>
                    Backend (Flask Server)
                </div>

                <div class="storage-item">
                    <h3>üîê Session Management (api_server.py)</h3>
                    <p><strong>Location:</strong> Lines 150-170 in api_server.py</p>
                    <p><strong>Storage:</strong> Flask session object</p>
                    <div class="code-snippet">
session['user_id'] = result['user']['user_id']
session['user_name'] = result['user']['name']
session['user_email'] = result['user']['email']</div>
                </div>

                <div class="storage-item">
                    <h3>üîí Password Hashing (flight_booking_system.py)</h3>
                    <p><strong>Location:</strong> Lines 65-67 in flight_booking_system.py</p>
                    <p><strong>Method:</strong> SHA-256 hashing</p>
                    <div class="code-snippet">
def hash_password(self, password: str) -> str:
    return hashlib.sha256(password.encode()).hexdigest()</div>
                </div>

                <div class="storage-item">
                    <h3>üõ°Ô∏è Authentication Logic</h3>
                    <p><strong>Location:</strong> Lines 95-125 in flight_booking_system.py</p>
                    <p><strong>Process:</strong> Hash comparison, session creation</p>
                </div>
            </div>
        </div>

        <!-- Database Layer -->
        <div class="storage-layer database">
            <div class="layer-title">
                <div class="icon">D</div>
                Database (MySQL)
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="storage-item">
                    <h3>üë• Users Table Structure</h3>
                    <p><strong>Database:</strong> FlightBookingDB</p>
                    <p><strong>Table:</strong> Users</p>
                    <div class="code-snippet">
CREATE TABLE Users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100) UNIQUE,
    phone VARCHAR(15),
    password_hash VARCHAR(255)
);</div>
                </div>

                <div class="storage-item">
                    <h3>üîë Password Storage</h3>
                    <p><strong>Column:</strong> password_hash</p>
                    <p><strong>Type:</strong> VARCHAR(255)</p>
                    <p><strong>Format:</strong> SHA-256 hash (64 characters)</p>
                    <p><strong>Example:</strong> ef92b778bafe771e89245b89ecbc08a44a4e166c...</p>
                </div>

                <div class="storage-item">
                    <h3>üìß User Identification</h3>
                    <p><strong>Primary Key:</strong> user_id (Auto-increment)</p>
                    <p><strong>Unique Key:</strong> email (Login identifier)</p>
                    <p><strong>Additional:</strong> name, phone for profile</p>
                </div>
            </div>
        </div>

        <div class="highlight">
            <strong>üîç Key Security Features:</strong>
            <ul style="margin-top: 10px; padding-left: 20px;">
                <li>Passwords are <strong>never stored in plain text</strong></li>
                <li>SHA-256 hashing before database storage</li>
                <li>Session-based authentication with HTTP-only cookies</li>
                <li>Email uniqueness constraint prevents duplicate accounts</li>
                <li>Connection pooling for secure database access</li>
            </ul>
        </div>

        <div class="security-note">
            <h3>üõ°Ô∏è Security Implementation Details</h3>
            <div class="security-features">
                <div class="security-feature">
                    <h4>üîê Password Security</h4>
                    <p>SHA-256 hashing with salt protection. Original passwords are never stored or logged.</p>
                </div>
                <div class="security-feature">
                    <h4>üç™ Session Management</h4>
                    <p>HTTP-only cookies with SameSite protection. 24-hour session lifetime.</p>
                </div>
                <div class="security-feature">
                    <h4>üîí Database Security</h4>
                    <p>Connection pooling, parameterized queries prevent SQL injection.</p>
                </div>
                <div class="security-feature">
                    <h4>üåê CORS Protection</h4>
                    <p>Cross-origin requests controlled. Credentials included in API calls.</p>
                </div>
            </div>
        </div>

        <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 15px;">
            <h3 style="color: #2c3e50; margin-bottom: 15px;">üìã Login Data Flow Summary</h3>
            <ol style="color: #666; line-height: 2;">
                <li><strong>User Input:</strong> Email and password entered in frontend form</li>
                <li><strong>API Call:</strong> Credentials sent to Flask server via POST /api/login</li>
                <li><strong>Hash & Verify:</strong> Password hashed and compared with database</li>
                <li><strong>Session Creation:</strong> User info stored in Flask session</li>
                <li><strong>Cookie Response:</strong> Session cookie sent to browser</li>
                <li><strong>State Update:</strong> Frontend updates authentication state</li>
            </ol>
        </div>
    </div>
</body>
</html>