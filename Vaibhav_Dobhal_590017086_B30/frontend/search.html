<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Search Student</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container-sm">
    <h2>Search Student</h2>
    <p class="lead">Search by name, roll number, or room number</p>

    <input class="input" id="query" placeholder="Enter search term...">
    <button class="btn btn-primary" onclick="search()">Search</button>

    <table class="table" id="resultTable" style="display:none;margin-top:20px;">
        <thead>
            <tr><th>ID</th><th>Name</th><th>Roll</th><th>Room</th><th>Contact</th></tr>
        </thead>
        <tbody></tbody>
    </table>

    <a href="admin_dashboard.html">Back</a>
</div>

<script>
function search() {
    let q = document.getElementById("query").value;
    fetch("http://127.0.0.1:5000/search_student?q=" + q)
        .then(r => r.json())
        .then(data => {
            const table = document.getElementById("resultTable");
            const tbody = table.querySelector("tbody");
            tbody.innerHTML = "";
            table.style.display = "table";

            data.forEach(s => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${s.student_id}</td>
                    <td>${s.name}</td>
                    <td>${s.roll_no}</td>
                    <td>${s.room_no || '-'}</td>
                    <td>${s.contact || '-'}</td>
                `;
                tbody.appendChild(tr);
            });
        });
}
</script>

</body>
</html>
