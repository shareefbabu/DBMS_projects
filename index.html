<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Book flights easily with our modern flight booking system. Search, compare, and book flights to your destination.">
    <meta name="keywords" content="flight booking, airline tickets, cheap flights, travel">
    <title>SkyBook - Your Flight Booking Companion</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Preconnect to API endpoint for faster requests -->
    <link rel="preconnect" href="http://localhost:5000">
    <link rel="dns-prefetch" href="http://localhost:5000">
    <!-- Font optimization -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 5L35 15L25 20L35 35L20 30L5 35L15 20L5 15L20 5Z" fill="url(#gradient)"/>
                        <defs>
                            <linearGradient id="gradient" x1="5" y1="5" x2="35" y2="35">
                                <stop offset="0%" style="stop-color:#667eea"/>
                                <stop offset="100%" style="stop-color:#764ba2"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <span class="logo-text">SkyBook</span>
                </div>
                
                <nav class="nav" id="nav">
                    <a href="#home" class="nav-link active">Home</a>
                    <a href="#search" class="nav-link">Search Flights</a>
                    <a href="#bookings" class="nav-link" id="myBookingsLink" style="display: none;">My Bookings</a>
                </nav>
                
                <div class="header-actions">
                    <div class="user-info" id="userInfo" style="display: none;">
                        <span class="user-name" id="userName"></span>
                        <button class="btn btn-secondary btn-sm" id="logoutBtn">Logout</button>
                    </div>
                    <div class="auth-buttons" id="authButtons">
                        <button class="btn btn-secondary btn-sm" id="loginBtn">Login</button>
                        <button class="btn btn-primary btn-sm" id="registerBtn">Register</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">Find Your Perfect Flight</h1>
                <p class="hero-subtitle">Search, compare, and book flights to anywhere in the world</p>
            </div>
        </div>
    </section>

    <!-- Search Section -->
    <section class="search-section" id="search">
        <div class="container">
            <div class="search-card">
                <h2 class="section-title">Search Flights</h2>
                
                <form class="search-form" id="searchForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="source" class="form-label">From</label>
                            <div class="autocomplete-container">
                                <input 
                                    type="text" 
                                    id="source" 
                                    class="form-input" 
                                    placeholder="e.g., Delhi, Mumbai, or airport name"
                                    required
                                    autocomplete="off"
                                >
                                <div class="autocomplete-dropdown" id="sourceDropdown"></div>
                            </div>
                            <span class="form-hint">Enter city or airport name</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="destination" class="form-label">To</label>
                            <div class="autocomplete-container">
                                <input 
                                    type="text" 
                                    id="destination" 
                                    class="form-input" 
                                    placeholder="e.g., Bengaluru, Chennai, or airport name"
                                    required
                                    autocomplete="off"
                                >
                                <div class="autocomplete-dropdown" id="destinationDropdown"></div>
                            </div>
                            <span class="form-hint">Enter city or airport name</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="date" class="form-label">Date</label>
                            <input 
                                type="date" 
                                id="date" 
                                class="form-input" 
                                required
                            >
                            <span class="form-hint">Select travel date</span>
                        </div>
                        
                        <div class="form-group form-group-submit">
                            <button type="submit" class="btn btn-primary btn-search">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM19 19l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Search Flights
                            </button>
                        </div>
                        </div>
                    </div>
                    
                    <!-- Data Source Toggle -->
                    <div style="margin-top: 1rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer; color: var(--text-secondary); font-size: 0.875rem;">
                            <input type="checkbox" id="useCSV" checked style="cursor: pointer;">
                            <span>Use CSV Dataset</span>
                        </label>
                        <span style="color: var(--text-muted); font-size: 0.75rem;">
                            (Uncheck to use database)
                        </span>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="results" style="display: none;">
        <div class="container">
            <div class="results-header">
                <h2 class="section-title">Available Flights</h2>
                <p class="results-count" id="resultsCount"></p>
            </div>
            
            <div class="results-grid" id="resultsGrid">
                <!-- Flight cards will be inserted here dynamically -->
            </div>
            
            <div class="no-results" id="noResults" style="display: none;">
                <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="45" stroke="#667eea" stroke-width="2" opacity="0.3"/>
                    <path d="M50 30v40M30 50h40" stroke="#667eea" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <h3>No flights found</h3>
                <p>Try adjusting your search criteria</p>
            </div>
        </div>
    </section>

    <!-- My Bookings Section -->
    <section class="bookings-section" id="bookings" style="display: none;">
        <div class="container">
            <h2 class="section-title">My Bookings</h2>
            <div class="bookings-grid" id="bookingsGrid">
                <!-- Booking cards will be inserted here -->
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-overlay" id="loginOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Welcome Back</h3>
                <button class="modal-close" id="loginClose">&times;</button>
            </div>
            
            <form class="modal-form" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail" class="form-label">Email</label>
                    <input 
                        type="email" 
                        id="loginEmail" 
                        class="form-input" 
                        placeholder="your@email.com"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="loginPassword" class="form-label">Password</label>
                    <input 
                        type="password" 
                        id="loginPassword" 
                        class="form-input" 
                        placeholder="Enter your password"
                        required
                    >
                </div>
                
                <!-- Forgot Password Link -->
                <div style="text-align: right; margin-bottom: 1rem;">
                    <a href="#" id="forgotPasswordLink" class="link" style="font-size: 0.875rem;">Forgot Password?</a>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">
                    Login
                </button>
                
                <p class="modal-footer-text">
                    Don't have an account? 
                    <a href="#" id="switchToRegister" class="link">Register here</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal" id="forgotPasswordModal">
        <div class="modal-overlay" id="forgotPasswordOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Forgot Password?</h3>
                <button class="modal-close" id="forgotPasswordClose">&times;</button>
            </div>
            
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 0.9375rem;">
                Enter your email address and we'll send you a link to reset your password.
            </p>
            
            <form class="modal-form" id="forgotPasswordForm">
                <div class="form-group">
                    <label for="forgotEmail" class="form-label">Email</label>
                    <input 
                        type="email" 
                        id="forgotEmail" 
                        class="form-input" 
                        placeholder="your@email.com"
                        required
                    >
                    <span class="form-hint">Enter the email you registered with</span>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">
                    Send Reset Link
                </button>
                
                <p class="modal-footer-text">
                    Remember your password? 
                    <a href="#" id="backToLogin" class="link">Back to Login</a>
                </p>
            </form>
            
            <!-- Success Message (hidden by default) -->
            <div id="resetLinkSent" style="display: none; text-align: center; padding: 2rem;">
                <svg width="60" height="60" viewBox="0 0 60 60" fill="none" style="margin: 0 auto 1rem;">
                    <circle cx="30" cy="30" r="28" stroke="#00C851" stroke-width="3" fill="none"/>
                    <path d="M18 30l8 8 16-16" stroke="#00C851" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h4 style="color: var(--success); margin-bottom: 0.5rem;">Reset Link Sent!</h4>
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                    Check your email for the password reset link.
                </p>
                <div id="resetLinkDisplay" style="background: var(--surface-elevated); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; word-break: break-all; font-size: 0.875rem; color: var(--text-secondary);">
                    <!-- Reset link will be displayed here in development -->
                </div>
                <button class="btn btn-primary" onclick="window.location.reload()">Back to Login</button>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-overlay" id="registerOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Create Account</h3>
                <button class="modal-close" id="registerClose">&times;</button>
            </div>
            
            <form class="modal-form" id="registerForm">
                <div class="form-group">
                    <label for="registerName" class="form-label">Full Name</label>
                    <input 
                        type="text" 
                        id="registerName" 
                        class="form-input" 
                        placeholder="John Doe"
                        required
                        minlength="2"
                    >
                </div>
                
                <div class="form-group">
                    <label for="registerEmail" class="form-label">Email</label>
                    <input 
                        type="email" 
                        id="registerEmail" 
                        class="form-input" 
                        placeholder="your@email.com"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="registerPhone" class="form-label">Phone</label>
                    <input 
                        type="tel" 
                        id="registerPhone" 
                        class="form-input" 
                        placeholder="+91 1234567890"
                        required
                        pattern="[0-9+\s\-]+"
                    >
                </div>
                
                <div class="form-group">
                    <label for="registerPassword" class="form-label">Password</label>
                    <input 
                        type="password" 
                        id="registerPassword" 
                        class="form-input" 
                        placeholder="Create a strong password"
                        required
                        minlength="6"
                    >
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">
                    Create Account
                </button>
                
                <p class="modal-footer-text">
                    Already have an account? 
                    <a href="#" id="switchToLogin" class="link">Login here</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Booking Modal -->
    <div class="modal" id="bookingModal">
        <div class="modal-overlay" id="bookingOverlay"></div>
        <div class="modal-content modal-content-large">
            <div class="modal-header">
                <h3 class="modal-title">Confirm Booking</h3>
                <button class="modal-close" id="bookingClose">&times;</button>
            </div>
            
            <div class="booking-details" id="bookingDetails">
                <!-- Flight details will be inserted here -->
            </div>
            
            <form class="modal-form" id="bookingForm">
                <div class="form-group">
                    <label for="seatNumber" class="form-label">Seat Number</label>
                    <input 
                        type="text" 
                        id="seatNumber" 
                        class="form-input" 
                        placeholder="e.g., 12A, 24C"
                        required
                        pattern="[0-9]{1,2}[A-F]"
                        maxlength="3"
                    >
                    <span class="form-hint">Format: Row number + Letter (1-180, A-F)</span>
                </div>
                
                <input type="hidden" id="bookingFlightId">
                <input type="hidden" id="bookingDate">
                
                <button type="submit" class="btn btn-primary btn-block">
                    Confirm Booking
                </button>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-icon" id="toastIcon"></div>
        <div class="toast-content">
            <div class="toast-title" id="toastTitle"></div>
            <div class="toast-message" id="toastMessage"></div>
        </div>
        <button class="toast-close" id="toastClose">&times;</button>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="spinner"></div>
        <p class="loading-text">Processing...</p>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text">
                &copy; 2025 SkyBook Flight Booking System. Built for DBMS Project.
            </p>
        </div>
    </footer>

    <script src="app.js" defer></script>
</body>
</html>
